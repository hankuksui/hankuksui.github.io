!function(n,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t(n):t(n)}("undefined"!=typeof window?window:this,function(l){var i={"ā":"a1","á":"a2","ǎ":"a3","à":"a4","ō":"o1","ó":"o2","ǒ":"o3","ò":"o4","ē":"e1","é":"e2","ě":"e3","è":"e4","ī":"i1","í":"i2","ǐ":"i3","ì":"i4","ū":"u1","ú":"u2","ǔ":"u3","ù":"u4","ü":"v0","ǖ":"v1","ǘ":"v2","ǚ":"v3","ǜ":"v4","ń":"n2","ň":"n3","":"m2"},c={},a={parseDict:function(){if(l.pinyin_dict_firstletter&&(c.firstletter=pinyin_dict_firstletter),l.pinyin_dict_notone)for(var n in c.notone={},c.py2hz=pinyin_dict_notone,pinyin_dict_notone)for(var t=0,e=(i=pinyin_dict_notone[n]).length;t<e;t++)c.notone[i[t]]||(c.notone[i[t]]=n);if(l.pinyin_dict_withtone){c.withtone={};for(var i,n=0,e=(i=pinyin_dict_withtone.split(",")).length;n<e;n++)c.withtone[String.fromCharCode(n+19968)]=i[n];if(l.pinyin_dict_notone)c.py2hz=pinyin_dict_notone;else{for(var o=a.removeTone(pinyin_dict_withtone).split(","),r={},n=0,e=o.length;n<e;n++)for(var p=String.fromCharCode(n+19968),h=o[n].split(" "),t=0;t<h.length;t++)r[h[t]]=(r[h[t]]||"")+p;c.py2hz=r}}},getPinyin:function(n,t,e,i){if(!n||/^ +$/g.test(n))return"";t=null==t?" ":t,e=null==e||e,i=null!=i&&i;var o=[];if(c.withtone){for(var r="",p=0,h=n.length;p<h;p++)(f=c.withtone[n[p]])?(i||(f=f.replace(/ .*$/g,"")),e||(f=this.removeTone(f)),r&&(o.push(r),r=""),o.push(f)):!n[p]||/^ +$/g.test(n[p])?r&&(o.push(r),r=""):r+=n[p];r&&(o.push(r),r="")}else{if(!c.notone)throw"抱歉，未找到合适的拼音字典文件！";e&&console.warn("pinyin_dict_notone 字典文件不支持声调！"),i&&console.warn("pinyin_dict_notone 字典文件不支持多音字！");for(r="",p=0,h=n.length;p<h;p++){var f,u=n.charAt(p);(f=c.notone[u])?(r&&(o.push(r),r=""),o.push(f)):!u||/^ +$/g.test(u)?r&&(o.push(r),r=""):r+=u}r&&(o.push(r),r="")}return i?l.pinyin_dict_polyphone?function(n,t,e,i){var o=l.pinyin_dict_polyphone,r=o[n];if(r){r=r.split(" ");for(var p=0;p<r.length;p++)t[p]=r[p]||t[p],i||(t[p]=a.removeTone(t[p]));return t.join(e)}for(p=0;p<n.length;p++){r="";for(var h=0;h<7&&p+h<n.length&&/^[\u2E80-\u9FFF]+$/.test(n[p+h]);h++){r+=n[p+h];var f=o[r];if(f){f=f.split(" ");for(var u=0;u<=h;u++)f[u]&&(t[p+u]=i?f[u]:a.removeTone(f[u]));break}}}for(p=0;p<t.length;p++)t[p]=t[p].replace(/ .*$/g,"");return t.join(e)}(n,o,t,e):v(o," ",t):o.join(t)},getFirstLetter:function(n,t){if(t=null!=t&&t,!n||/^ +$/g.test(n))return"";if(c.firstletter){for(var e=[],i=0;i<n.length;i++){var o=n.charCodeAt(i),r=n.charAt(i);19968<=o&&o<=40869&&(r=c.firstletter.all.charAt(o-19968),t&&(r=c.firstletter.polyphone[o]||r)),e.push(r)}return t?v(e,"",""):e.join("")}for(var p=(p=this.getPinyin(n," ",!1,t))instanceof Array?p:[p],e=[],i=0;i<p.length;i++){for(var h=[],f=p[i].split(" "),u=/^\w/,l=0,a=f.length;l<a;l++){var s=f[l];u.test(s)?h.push(s[0].toUpperCase()):h.push(s)}e.push(h.join(""))}return t?g(e):e[0]},getHanzi:function(n){if(!c.py2hz)throw"抱歉，未找到合适的拼音字典文件！";return c.py2hz[this.removeTone(n)]||""},getSameVoiceWord:function(n,t){return this.getHanzi(this.getPinyin(n," ",!1))},removeTone:function(n){return n.replace(/[āáǎàōóǒòēéěèīíǐìūúǔùüǖǘǚǜńň]/g,function(n){return i[n][0]})},getTone:function(n){var t,e={};for(t in i)e[i[t]]=t;return(n||"").replace(/[a-z]\d/g,function(n){return e[n]||n})}};function v(n,t,e){t=t||"";for(var i=[""],o=[],r=0;r<n.length;r++){for(var o=[],p=n[r].split(t),h=0;h<p.length;h++)for(var f=0;f<i.length;f++)o.push(i[f]+(i[f]?e:"")+p[h]);i=o}return g(i)}function g(n){for(var t=[],e={},i=0;i<n.length;i++){var o=typeof n[i]+n[i];e[o]||(t.push(n[i]),e[o]=!0)}return t}a.parseDict(),a.dict=c,l.pinyinUtil=a});