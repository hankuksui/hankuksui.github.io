const dbVersionName="UrlsDBVersion";var DAO={db:null,dbversion:localStorage.getItem(dbVersionName)||"1.0.0",dbBuilds:[e=>{"1.0.0"==DAO.dbversion&&DAO.db.batchExecute(["CREATE TABLE IF NOT EXISTS categories (id TEXT,name TEXT,desc TEXT,sup_id TEXT, level NUMBER, add_time NUMBER, CONSTRAINT pk_1 PRIMARY KEY (id))","CREATE TABLE IF NOT EXISTS urls (id TEXT,addr TEXT,name TEXT,img TEXT,cat_id TEXT,add_time NUMBER, CONSTRAINT pk_1 PRIMARY KEY (id))"],e,DAO.failFnSample)},e=>{var d="1.0.0",a="1.0.1";DAO.dbversion==d?DAO.db.db.changeVersion(d,a,()=>{DAO.db.batchExecute(["ALTER TABLE categories ADD COLUMN sort_key NUMBER","ALTER TABLE urls ADD COLUMN sort_key NUMBER","CREATE TABLE IF NOT EXISTS icons (id TEXT, base_data TEXT, desc TEXT, sort_key NUMBER, add_time NUMBER, CONSTRAINT pk_1 PRIMARY KEY (id))"],()=>{},e=>{console.error(e)})},e=>{console.error(e)},()=>{DAO.dbversion=a,localStorage.setItem(dbVersionName,DAO.dbversion),e()}):e()}],buildDb:e=>{DAO.dbBuilds[e]&&DAO.dbBuilds[e](()=>{e++,DAO.buildDb(e)})},init:function(e){this.db=new Sqlite3("UrlsDB",DAO.dbversion),e&&"function"==typeof e&&(this.successFnSample=e),DAO.dbBuilds.push(()=>{DAO.db.batInsert([{id:"1",base_data:url_img_str,desc:InfoStr.default}],"icons",DAO.successFnSample,DAO.failFnSample)}),DAO.buildDb(0)},successFnSample:function(){},failFnSample:function(e,d){console.error(d)},getAllData(d){this.db.getData("categories",e=>{null!=e&&0<e.length&&e.forEach(e=>{d("INSERT INTO categories(id,name,desc,sup_id,level,add_time,sort_key) values('"+e.id+"','"+e.name+"','"+e.desc+"','"+e.sup_id+"',"+e.level+","+e.add_time+","+e.sort_key+")")}),this.db.getData("urls",e=>{console.log(e),null!=e&&0<e.length&&e.forEach(e=>{d("INSERT INTO urls(id,addr,name,img,cat_id,add_time,sort_key) values('"+e.id+"','"+e.addr+"','"+e.name+"',"+(e.img?"'"+e.img+"'":"null")+",'"+e.cat_id+"',"+e.add_time+","+e.sort_key+")")}),this.db.getData("icons",e=>{console.log(e),null!=e&&0<e.length&&e.forEach(e=>{d("INSERT INTO icons(id,base_data,desc,sort_key,add_time) values('"+e.id+"','"+e.base_data+"','"+e.desc+"',"+e.sort_key+","+e.add_time+")")})},()=>{})},()=>{})},()=>{})},Category:{id:"",name:"",sup_id:"",level:0,add_time:0},Url:{id:"",addr:"",name:"",img:"",cat_id:"",add_time:0}};